@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@500;700&family=Noto+Sans+SC:wght@400;500;600;700&family=Sora:wght@600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 210 40% 98%;
    --foreground: 222 47% 11%;
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    --primary: 221 72% 43%;
    --primary-foreground: 210 100% 98%;
    --secondary: 217 91% 60%;
    --secondary-foreground: 210 100% 98%;
    --accent: 192 90% 42%;
    --accent-foreground: 210 100% 98%;
    --muted: 210 32% 94%;
    --muted-foreground: 215 20% 36%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 222 47% 11%;
    --success: 158 73% 34%;
    --success-foreground: 0 0% 100%;
    --info: 217 91% 60%;
    --info-foreground: 0 0% 100%;
    --border: 214 32% 86%;
    --input: 214 28% 82%;
    --ring: 221 72% 43%;
    --radius: 0.75rem;
    --radius-xl: 1.1rem;
    --base-100: 0 0% 100%;
    --base-200: 210 32% 94%;
    --base-300: 214 32% 86%;
    --base-content: 222 47% 11%;
    --n: 222 47% 11%;
    --nc: 0 0% 100%;
    color-scheme: light;
  }

  .dark {
    --background: 222 47% 8%;
    --foreground: 210 40% 96%;
    --card: 222 40% 12%;
    --card-foreground: 210 40% 96%;
    --popover: 222 40% 12%;
    --popover-foreground: 210 40% 96%;
    --primary: 217 91% 68%;
    --primary-foreground: 222 47% 8%;
    --secondary: 211 89% 64%;
    --secondary-foreground: 222 47% 8%;
    --accent: 190 86% 56%;
    --accent-foreground: 222 47% 8%;
    --muted: 217 25% 18%;
    --muted-foreground: 215 18% 68%;
    --destructive: 0 86% 70%;
    --destructive-foreground: 222 47% 8%;
    --warning: 39 89% 57%;
    --warning-foreground: 222 47% 8%;
    --success: 158 63% 49%;
    --success-foreground: 222 47% 8%;
    --info: 211 89% 64%;
    --info-foreground: 222 47% 8%;
    --border: 217 22% 26%;
    --input: 217 24% 24%;
    --ring: 217 91% 68%;
    --base-100: 222 40% 12%;
    --base-200: 217 25% 18%;
    --base-300: 217 22% 26%;
    --base-content: 210 40% 96%;
    --n: 210 40% 96%;
    --nc: 222 47% 8%;
    color-scheme: dark;
  }

  * {
    box-sizing: border-box;
    @apply border-border;
  }

  html {
    @apply bg-background text-foreground;
  }

  body {
    margin: 0;
    min-height: 100vh;
    font-family: 'IBM Plex Sans', 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    line-height: 1.55;
    font-weight: 400;
    background:
      radial-gradient(1000px 520px at 6% -8%, hsl(var(--primary) / 0.14), transparent 62%),
      radial-gradient(900px 460px at 95% -14%, hsl(var(--accent) / 0.12), transparent 64%),
      linear-gradient(180deg, hsl(var(--background)) 0%, hsl(var(--background)) 62%, hsl(var(--muted) / 0.58) 100%),
      hsl(var(--background));
    color: hsl(var(--foreground));
    text-rendering: geometricPrecision;
  }

  a {
    color: inherit;
  }

  button {
    font: inherit;
  }
}

@layer components {
  .btn {
    @apply inline-flex h-10 items-center justify-center gap-2 rounded-lg border border-transparent px-4 py-2 text-sm font-semibold shadow-sm transition-all duration-200;
    background-color: hsl(var(--secondary) / 0.2);
    color: hsl(var(--foreground));
  }

  .btn:hover {
    @apply -translate-y-[1px] shadow-md;
    background-color: hsl(var(--secondary) / 0.3);
  }

  .btn:focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  .btn-primary {
    @apply bg-primary text-primary-foreground;
    box-shadow: 0 14px 24px -14px hsl(var(--primary) / 0.9);
  }

  .btn-primary:hover {
    @apply bg-primary/90;
    box-shadow: 0 16px 28px -16px hsl(var(--primary) / 0.95);
  }

  .btn-secondary {
    @apply border text-foreground;
    border-color: hsl(var(--secondary) / 0.32);
    background-color: hsl(var(--secondary) / 0.2);
  }

  .btn-ghost {
    @apply border-transparent bg-transparent text-foreground;
    opacity: 0.92;
  }

  .btn-ghost:hover {
    @apply text-foreground;
    background-color: hsl(var(--accent) / 0.38);
    opacity: 1;
  }

  .btn-outline {
    @apply border-input text-foreground;
    background-color: hsl(var(--card) / 0.72);
  }

  .btn-outline:hover {
    @apply bg-muted/50;
  }

  .btn-error {
    @apply bg-destructive text-destructive-foreground;
    box-shadow: 0 14px 24px -14px hsl(var(--destructive) / 0.9);
  }

  .btn-error:hover {
    @apply bg-destructive/90;
  }

  .btn-warning {
    @apply bg-warning text-warning-foreground;
    box-shadow: 0 14px 24px -14px hsl(var(--warning) / 0.85);
  }

  .btn-warning:hover {
    @apply bg-warning/90;
  }

  .btn-success {
    @apply bg-success text-success-foreground;
    box-shadow: 0 14px 24px -14px hsl(var(--success) / 0.85);
  }

  .btn-success:hover {
    @apply bg-success/90;
  }

  .btn-circle {
    @apply h-10 w-10 rounded-full p-0;
  }

  .btn-square {
    @apply h-8 w-8 rounded-md p-0;
  }

  .btn-sm {
    @apply h-9 px-3 text-sm;
  }

  .btn-xs {
    @apply h-7 px-2 text-xs;
  }

  .btn-md {
    @apply h-10 px-4 text-sm;
  }

  .btn-disabled {
    @apply pointer-events-none opacity-55;
  }

  .btn:disabled {
    @apply pointer-events-none opacity-55;
  }

  .input,
  .select {
    @apply flex h-10 w-full rounded-lg border border-input px-3 py-2 text-sm text-foreground;
    background-color: hsl(var(--card) / 0.82);
    box-shadow: inset 0 1px 0 hsl(var(--background) / 0.7);
  }

  .input-bordered,
  .select-bordered,
  .textarea-bordered {
    @apply border-input;
  }

  .input:focus,
  .select:focus,
  .textarea:focus {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  .input-xs {
    @apply h-8 text-xs;
  }

  .input-sm {
    @apply h-9 text-sm;
  }

  .textarea {
    @apply min-h-[96px] w-full rounded-lg border border-input px-3 py-2 text-sm text-foreground;
    background-color: hsl(var(--card) / 0.82);
    box-shadow: inset 0 1px 0 hsl(var(--background) / 0.7);
  }

  .textarea-sm {
    min-height: 88px;
    @apply text-sm;
  }

  .card {
    @apply rounded-xl border text-card-foreground backdrop-blur;
    border-color: hsl(var(--border) / 0.85);
    background-color: hsl(var(--card) / 0.92);
    box-shadow: 0 20px 45px -32px hsl(var(--foreground) / 0.55);
  }

  .card-body {
    @apply p-6;
  }

  .alert {
    @apply rounded-lg border border-border px-4 py-3 text-sm text-foreground;
    background-color: hsl(var(--muted) / 0.45);
  }

  .alert-warning {
    @apply border-warning/40 bg-warning/10 text-warning;
  }

  .alert-error {
    @apply border-destructive/45 bg-destructive/10 text-destructive;
  }

  .badge {
    @apply inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-semibold;
  }

  .badge-success {
    @apply border-success/40 bg-success/10 text-success;
  }

  .badge-outline {
    @apply border-border bg-transparent text-foreground;
  }

  .badge-sm {
    @apply px-2 py-0 text-[11px];
  }

  .rounded-box {
    border-radius: var(--radius-xl);
  }

  .link {
    @apply text-primary underline-offset-4 hover:underline;
  }

  .modal {
    position: fixed;
    inset: 0;
    margin: 0;
    border: 0;
    width: 100vw;
    max-width: 100vw;
    height: 100dvh;
    max-height: 100dvh;
    box-sizing: border-box;
    z-index: 70;
    display: none;
    place-items: center;
    padding: 1rem;
    overflow: hidden;
    background: rgb(0 0 0 / 0.45);
  }

  .modal[open] {
    display: grid;
  }

  .modal::backdrop {
    background: rgb(0 0 0 / 0.42);
  }

  .modal-box {
    @apply w-full max-w-2xl rounded-2xl border border-border bg-card text-card-foreground shadow-xl;
    padding: 1.25rem;
  }

  .modal-action {
    @apply mt-4 flex justify-end gap-2;
  }

  .dropdown {
    position: relative;
    display: inline-flex;
  }

  .dropdown-content {
    position: absolute;
    z-index: 40;
    display: none;
  }

  .dropdown:focus-within .dropdown-content,
  .dropdown:hover .dropdown-content,
  .dropdown.dropdown-open .dropdown-content {
    display: block;
  }

  .dropdown-end .dropdown-content {
    right: 0;
    left: auto;
  }

  .menu {
    @apply rounded-lg border border-border bg-popover p-1 text-popover-foreground shadow-md;
  }

  .menu li {
    list-style: none;
  }

  .menu li > button {
    @apply w-full rounded-md px-2 py-1.5 text-left text-sm hover:bg-accent/35;
  }

  .menu-sm li > button {
    @apply px-2 py-1 text-xs;
  }

  .tooltip {
    position: relative;
    display: inline-flex;
  }

  .tooltip[data-tip]::after {
    content: attr(data-tip);
    position: absolute;
    left: 50%;
    bottom: calc(100% + 8px);
    transform: translateX(-50%);
    white-space: nowrap;
    border-radius: 999px;
    background: hsl(var(--foreground) / 0.95);
    color: hsl(var(--background));
    padding: 4px 10px;
    font-size: 0.72rem;
    line-height: 1.2;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.15s ease;
    z-index: 40;
  }

  .tooltip[data-tip]:hover::after,
  .tooltip[data-tip]:focus-within::after {
    opacity: 1;
  }

  .toggle {
    @apply h-5 w-9 appearance-none rounded-full border border-input bg-muted/70 transition-colors;
    position: relative;
    cursor: pointer;
  }

  .toggle::before {
    content: '';
    position: absolute;
    left: 2px;
    top: 50%;
    width: 14px;
    height: 14px;
    transform: translateY(-50%);
    border-radius: 999px;
    background: hsl(var(--card));
    transition: transform 0.2s ease;
  }

  .toggle:checked {
    @apply bg-primary/85;
  }

  .toggle:checked::before {
    transform: translate(14px, -50%);
  }

  .toggle-xs {
    @apply h-4 w-8;
  }

  .toggle-xs::before {
    width: 10px;
    height: 10px;
  }

  .toggle-xs:checked::before {
    transform: translate(13px, -50%);
  }

  .range {
    @apply h-2 w-full cursor-pointer appearance-none rounded-full bg-muted/80;
  }

  .range::-webkit-slider-thumb {
    @apply h-4 w-4 appearance-none rounded-full border border-primary/30 bg-primary;
    margin-top: -5px;
  }

  .range::-moz-range-thumb {
    @apply h-4 w-4 rounded-full border border-primary/30 bg-primary;
  }

  .range::-webkit-slider-runnable-track {
    @apply h-2 rounded-full bg-muted/80;
  }

  .range::-moz-range-track {
    @apply h-2 rounded-full bg-muted/80;
  }

  .range-xs {
    height: 0.35rem;
  }

  .table {
    width: 100%;
    border-collapse: collapse;
  }

  .table-zebra tbody tr:nth-child(even) {
    @apply bg-muted/30;
  }

  .table-sm th,
  .table-sm td {
    padding: 0.5rem 0.625rem;
    font-size: 0.82rem;
  }

  .mockup-code {
    @apply rounded-xl border border-border bg-card/95 text-card-foreground shadow-sm;
  }
}


.app-shell {
  max-width: 1200px;
  margin: 0 auto;
  padding: 32px 24px 48px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.public-home {
  align-items: stretch;
}

.public-home-hero {
  text-align: center;
  padding: 48px 32px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  position: relative;
}

.public-home-hero .language-switcher-row {
  position: absolute;
  top: 16px;
  right: 20px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

/* When screen is small, stack switcher above title to create vertical spacing */
@media (max-width: 860px) {
  .public-home-hero .language-switcher-row {
    position: static;
    display: flex;
    width: 100%;
    justify-content: flex-end; /* keep it on the right */
    margin-bottom: 8px; /* vertical gap to the heading */
  }
}

.public-home-hero h1 {
  margin: 0;
  font-size: 2.4rem;
  font-weight: 700;
  letter-spacing: -0.01em;
  color: hsl(var(--foreground));
  display: inline-block;
}

.hero-title {
  /* Brand-consistent blue spectrum for a calmer, data-first headline */
  display: inline-block;
  align-self: center;
  background: linear-gradient(
    105deg,
    hsl(var(--primary)) 0%,
    hsl(var(--secondary) / 0.94) 52%,
    hsl(var(--accent)) 100%
  );
  margin: 0 auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.public-home-tagline {
  margin: 0;
  color: hsl(var(--muted-foreground));
  font-size: 1.05rem;
}

.public-home-description {
  margin: 0;
  font-size: 0.95rem;
  color: hsl(var(--muted-foreground));
  line-height: 1.6;
}

.language-switcher {
  display: inline-block;
  position: relative;
  z-index: 10;
}

.language-switcher-trigger {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-weight: 600;
  text-transform: uppercase;
}

.language-flag {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  overflow: hidden;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: hsl(var(--primary-foreground));
  box-shadow: 0 0 0 1px hsl(var(--border) / 0.82), 0 2px 6px hsl(var(--border) / 0.96);
}

.language-short {
  font-weight: 600;
  letter-spacing: 0.02em;
}

.language-switcher-menu {
  padding: 8px;
  min-width: 160px;
  z-index: 20;
}

.language-option {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  border: none;
  background: transparent;
  font-weight: 500;
  padding: 6px 10px;
  border-radius: 8px;
  color: inherit;
}

.language-option.active {
  background: hsl(var(--primary) / 0.14);
  color: hsl(var(--primary));
}

.language-option:hover {
  background: hsl(var(--border) / 0.76);
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.public-home-actions {
  display: flex;
  justify-content: center;
  gap: 16px;
  flex-wrap: wrap;
  margin-top: 24px;
}

.linuxdo-login-button {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 0.72rem 1.05rem;
  border-radius: 999px;
  border: 1px solid hsl(var(--foreground) / 0.18);
  background: hsl(var(--primary-foreground));
  color: hsl(var(--foreground));
  text-decoration: none;
  font-weight: 600;
  line-height: 1;
  box-shadow: 0 1px 2px hsl(var(--border) / 0.82);
  transition: border-color 0.16s ease, box-shadow 0.16s ease, transform 0.16s ease;
}

.linuxdo-login-button img {
  width: 20px;
  height: 20px;
  border-radius: 50%;
}

.linuxdo-login-button:hover {
  border-color: hsl(var(--foreground) / 0.32);
  box-shadow: 0 6px 14px hsl(var(--border) / 0.96);
  transform: translateY(-1px);
}

.linuxdo-login-button:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px hsl(var(--border) / 0.96);
}

.hero-metrics {
  margin-top: 24px;
  padding: 0;
}
/* Public Hero Stats: ensure 1→3 columns (never 2) */
.metrics-grid.hero-metrics {
  grid-template-columns: 1fr;
}

.sse-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 0.85rem;
  font-weight: 600;
  background: hsl(var(--border) / 0.82);
  color: hsl(var(--foreground));
}
.sse-chip-ok {
  background: hsl(var(--success) / 0.16);
  color: hsl(var(--success));
}
.sse-chip-warn {
  background: hsl(var(--warning) / 0.18);
  color: hsl(var(--warning));
}
.sse-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: currentColor;
  display: inline-block;
}
@media (min-width: 860px) {
.metrics-grid.hero-metrics {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}
}

/* Batch create dialog: ensure only textarea scrolls, modal-box stays within viewport with margins */
#batch_create_tokens_modal .modal-box {
  display: flex;
  flex-direction: column;
  max-height: calc(100vh - 5rem); /* keep vertical margins inside viewport */
}

#batch_create_tokens_modal .batch-dialog-body {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0; /* allow textarea to shrink within modal-box */
}

#batch_create_tokens_modal .batch-dialog-body .textarea {
  flex: 1 1 auto;
  min-height: 0;
}

.icon-spin {
  animation: icon-spin 1s linear infinite;
}

@keyframes icon-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.token-input-wrapper {
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: flex-start;
}

.token-label {
  font-weight: 600;
  font-size: 0.95rem;
  color: hsl(var(--foreground));
  white-space: nowrap;
  margin: 0;
}

.token-input-row {
  display: inline-flex;
  gap: 8px;
  align-items: center;
  flex: 0 0 auto;
}

.token-input {
  width: 360px;
  padding: 10px 44px 10px 14px;
  border-radius: 12px;
  border: 1px solid hsl(var(--foreground) / 0.18);
  font-family: 'SF Mono', 'Fira Mono', Consolas, 'Courier New', monospace;
  font-size: 0.95rem;
  background: hsl(var(--card) / 0.92);
}

/* Mask characters without using password type to avoid password managers */
.token-input.masked {
  -webkit-text-security: disc;
  text-security: disc;
}

.token-input-shell {
  position: relative;
  /* Keep copy button close to input: do not stretch */
  flex: 0 0 auto;
  display: inline-block;
}


.token-visibility-button {
  position: absolute;
  top: 50%;
  right: 12px;
  transform: translateY(-50%);
  border: none;
  background: transparent;
  padding: 4px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.token-visibility-button img {
  width: 22px;
  height: 22px;
}

.token-copy-button {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  min-width: 132px;
  justify-content: center;
}

.token-copy-button.btn-outline {
  border-color: hsl(var(--primary) / 0.34);
  background:
    linear-gradient(180deg, hsl(var(--primary) / 0.14) 0%, hsl(var(--primary) / 0.08) 100%),
    hsl(var(--card) / 0.92);
  color: hsl(var(--primary) / 0.94);
  box-shadow:
    0 10px 22px -16px hsl(var(--primary) / 0.58),
    inset 0 1px 0 hsl(var(--background) / 0.82);
}

.token-copy-button.btn-outline:hover {
  border-color: hsl(var(--primary) / 0.54);
  background:
    linear-gradient(180deg, hsl(var(--primary) / 0.2) 0%, hsl(var(--primary) / 0.12) 100%),
    hsl(var(--card) / 0.95);
  color: hsl(var(--primary));
  box-shadow:
    0 14px 26px -18px hsl(var(--primary) / 0.62),
    inset 0 1px 0 hsl(var(--background) / 0.9);
}

.token-copy-button .token-copy-icon {
  width: 16px;
  height: 16px;
  color: currentColor;
  opacity: 1;
}

/* Public page, narrow screens: make token row wrap and align ends */
@media (max-width: 560px) {
  .public-home .access-token-box .token-label {
    width: 100%;
    text-align: left;
  }
  .public-home .access-token-box .token-input-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
    justify-content: flex-start;
    width: 100%;
  }
  .public-home .access-token-box .token-input-shell {
    flex: 1 1 100%;
    min-width: 0;
    display: block;
  }
  .public-home .access-token-box .token-input {
    width: 100%;
    max-width: none;
    min-width: 0;
  }
  .public-home .access-token-box .token-copy-button {
    margin-left: auto;
    white-space: nowrap;
    flex: 0 0 auto;
  }
}

.token-input:focus {
  outline: none;
  border-color: hsl(var(--primary) / 0.56);
  box-shadow: 0 0 0 3px hsl(var(--primary) / 0.2);
}

.public-home-guide {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.guide-tabs {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.guide-tab {
  padding: 8px 18px;
  border-radius: 999px;
  border: 1px solid hsl(var(--primary) / 0.2);
  background: hsl(var(--card) / 0.9);
  color: hsl(var(--muted-foreground));
  cursor: pointer;
  transition: all 0.15s ease;
}

.guide-tab.active {
  background: linear-gradient(105deg, hsl(var(--primary)) 0%, hsl(var(--secondary) / 0.9) 55%, hsl(var(--secondary)) 100%);
  color: hsl(var(--primary-foreground));
  box-shadow: 0 8px 20px hsl(var(--primary) / 0.3);
}

.guide-tab:hover {
  transform: translateY(-1px);
}

.guide-panel {
  border-radius: 16px;
  border: 1px solid hsl(var(--border) / 0.7);
  background: hsl(var(--card) / 0.92);
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.guide-panel h3 {
  margin: 0;
  font-size: 1.05rem;
  font-weight: 600;
  color: hsl(var(--foreground));
}

.guide-panel ol {
  margin: 0;
  padding-left: 16px;
  color: hsl(var(--muted-foreground));
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.guide-panel ol > li > code,
.guide-panel p > code {
  border: 1px solid hsl(var(--border) / 0.72);
  background: hsl(var(--muted) / 0.58);
  color: hsl(var(--foreground) / 0.86);
  padding: 0.08rem 0.42rem;
  border-radius: 0.45rem;
  font-size: 0.92em;
  font-weight: 500;
  box-shadow: inset 0 1px 0 hsl(var(--background) / 0.72);
  font-family: 'JetBrains Mono', 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
}

/* Mobile dropdown for guide client selection */
.guide-select { display: none; margin: 8px 0 0; }
.guide-select select { width: 100%; }
@media (max-width: 640px) {
  .guide-tabs { display: none !important; }
  .guide-select { display: block; }
}

.guide-sample {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.guide-sample-title {
  margin: 0;
  font-weight: 600;
  color: hsl(var(--foreground));
}

/* guide code keeps mockup-code look-and-feel; keep only syntax colors below */

.guide-reference {
  margin: 0;
  font-size: 0.85rem;
  color: hsl(var(--muted-foreground) / 0.82);
}

.guide-reference a {
  color: hsl(var(--primary));
  text-decoration: none;
}

.guide-reference a:hover {
  text-decoration: underline;
}

.update-banner {
  padding: 18px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  border-left: 4px solid hsl(var(--accent));
}

.update-banner-text {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.update-banner-text strong {
  font-size: 0.95rem;
  color: hsl(var(--foreground));
}

.update-banner-text span {
  color: hsl(var(--muted-foreground));
  font-size: 0.85rem;
}

/* Reusable segmented tabs */
.segmented-tabs {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 3px;
  border-radius: 999px;
  border: 1px solid hsl(var(--border) / 0.9);
  background: linear-gradient(180deg, hsl(var(--card) / 0.92) 0%, hsl(var(--muted) / 0.55) 100%);
  box-shadow: inset 0 1px 0 hsl(var(--background) / 0.9);
  max-width: 100%;
  overflow-x: auto;
  scrollbar-width: none;
}

.segmented-tabs::-webkit-scrollbar {
  display: none;
}

.segmented-tab {
  border: 1px solid transparent;
  background: transparent;
  color: hsl(var(--muted-foreground));
  border-radius: 999px;
  min-height: 2rem;
  padding: 0 17px;
  font-size: 0.9rem;
  font-weight: 600;
  letter-spacing: 0.01em;
  line-height: 1;
  white-space: nowrap;
  cursor: pointer;
  transition: color 0.16s ease, background-color 0.16s ease, border-color 0.16s ease, box-shadow 0.16s ease;
}

.segmented-tab:hover:not(.is-active) {
  border-color: hsl(var(--primary) / 0.2);
  background: hsl(var(--accent) / 0.12);
  color: hsl(var(--foreground));
}

.segmented-tab:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px hsl(var(--ring) / 0.35);
}

.segmented-tab.is-active {
  border-color: hsl(var(--foreground) / 0.12);
  background: linear-gradient(135deg, hsl(var(--foreground)) 0%, hsl(var(--primary) / 0.86) 100%);
  color: hsl(var(--primary-foreground));
  box-shadow: 0 8px 12px -10px hsl(var(--foreground) / 0.52), inset 0 1px 0 hsl(var(--primary-foreground) / 0.2);
}

.update-banner-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.public-home-footer {
  margin-top: 8px;
  padding: 18px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 12px;
  font-size: 0.9rem;
}

.public-home-footer a {
  color: hsl(var(--primary));
  text-decoration: none;
}

.public-home-footer a:hover {
  text-decoration: underline;
}

.footer-version {
  display: flex;
  align-items: center;
  gap: 6px;
  color: hsl(var(--muted-foreground));
}

.footer-gh {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-weight: 600;
}

.footer-gh img {
  width: 20px;
  height: 20px;
}

/* guide code: keep mockup-code look-and-feel, but align multi-line text without prefixes */
.guide-lang-badge {
  position: absolute;
  top: 8px;
  right: 10px;
  pointer-events: none;
  text-transform: uppercase;
}

.guide-code-shell {
  position: relative;
  border: 1px solid hsl(var(--border) / 0.7);
  border-radius: 14px;
  background:
    linear-gradient(180deg, hsl(var(--background) / 0.56) 0%, hsl(var(--background) / 0.4) 100%),
    hsl(var(--card) / 0.86);
  box-shadow: inset 0 1px 0 hsl(var(--background) / 0.85);
  overflow: hidden;
}

.guide-code-shell pre {
  margin: 0;
  padding: 1rem 1.1rem 1.05rem;
  overflow-x: auto;
}

.guide-code-shell pre::before {
  content: none; /* disable built-in prefix gutter so all lines align */
  margin-right: 0;
}

.guide-code-shell pre code {
  display: block;
  background: transparent;
  padding: 0;
  border-radius: 0;
  font-family: 'JetBrains Mono', 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 0.965rem;
}

.mockup-code code {
  white-space: pre;
  word-break: normal;
  color: hsl(var(--foreground) / 0.96);
  line-height: 1.58;
}

.mockup-code .hl-key {
  color: hsl(var(--primary) / 0.9);
  font-weight: 600;
}

.mockup-code .hl-section {
  color: hsl(var(--secondary) / 0.9);
  font-weight: 600;
}

.mockup-code .hl-string {
  color: hsl(var(--accent) / 0.9);
}

.mockup-code .hl-boolean {
  color: hsl(var(--warning) / 0.9);
  font-weight: 600;
}

.mockup-code .hl-comment {
  color: hsl(var(--muted-foreground) / 0.95);
  font-style: italic;
}

.public-home-metrics {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.public-home-metrics-header {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.surface {
  background: hsl(var(--card) / 0.85);
  backdrop-filter: blur(10px);
  border: 1px solid hsl(var(--border) / 0.76);
  border-radius: 18px;
  box-shadow: 0 18px 35px hsl(var(--border) / 0.82);
}

.app-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  position: relative;
  z-index: 30;
}

.admin-panel-header {
  align-items: center;
  gap: clamp(14px, 2.4vw, 24px);
  padding: 16px 22px;
}

.admin-panel-header-main {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
  flex: 1 1 520px;
}

.admin-panel-header-main h1 {
  margin: 0;
  font-size: clamp(1.45rem, 2.2vw, 1.86rem);
  font-weight: 700;
  line-height: 1.12;
  letter-spacing: -0.02em;
}

.admin-panel-header-subtitle {
  margin: 0;
  max-width: 64ch;
  font-size: 0.96rem;
  color: hsl(var(--muted-foreground));
}

.admin-panel-header-time {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  margin: 0;
  color: hsl(var(--muted-foreground));
  font-size: 0.76rem;
  font-weight: 500;
  letter-spacing: 0;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}

.admin-panel-header-time-icon {
  color: hsl(var(--muted-foreground) / 0.88);
  flex-shrink: 0;
}

.admin-panel-header-time-label {
  opacity: 0.78;
}

.admin-panel-header-time-value {
  font-family: 'JetBrains Mono', 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  color: hsl(var(--foreground) / 0.72);
}

.admin-panel-header-side {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  min-width: 0;
  flex: 0 1 auto;
}

.admin-panel-header-tools {
  display: inline-flex;
  flex-wrap: wrap;
  justify-content: flex-end;
  align-items: center;
  gap: 8px;
  max-width: min(100%, 360px);
}

.admin-panel-header-actions {
  display: inline-flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
}

.admin-language-switcher {
  display: inline-flex;
  align-items: center;
  flex-shrink: 0;
  gap: 8px;
}

.admin-panel-header .theme-toggle-trigger,
.admin-panel-header .language-switcher-trigger {
  min-height: 2.1rem;
  border-color: hsl(var(--border) / 0.85);
  background: hsl(var(--card) / 0.88);
}

.admin-panel-header .theme-toggle-trigger:hover,
.admin-panel-header .language-switcher-trigger:hover {
  border-color: hsl(var(--primary) / 0.4);
  background: hsl(var(--accent) / 0.12);
}

.admin-panel-header .theme-toggle-trigger svg,
.admin-panel-header .language-switcher-trigger svg {
  color: currentColor;
}

.user-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  max-width: 19ch;
  padding: 6px 11px;
  border-radius: 999px;
  border: 1px solid hsl(var(--border) / 0.82);
  background: hsl(var(--muted) / 0.5);
  color: hsl(var(--muted-foreground));
  font-size: 0.8rem;
  font-weight: 600;
  letter-spacing: 0.02em;
}

.user-badge span {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.user-badge-admin {
  border-color: hsl(var(--warning) / 0.32);
  background: hsl(var(--warning) / 0.14);
  color: hsl(var(--warning));
}

.user-badge-icon {
  font-size: 0.92rem;
  flex-shrink: 0;
}

.admin-panel-refresh-button {
  min-height: 2.1rem;
  min-width: 108px;
  border-radius: 10px;
  border-color: hsl(var(--primary) / 0.28);
  background: hsl(var(--primary) / 0.08);
  color: hsl(var(--primary));
  box-shadow: inset 0 1px 0 hsl(var(--background) / 0.88);
  white-space: nowrap;
}

.admin-panel-refresh-button:hover:not(:disabled) {
  border-color: hsl(var(--primary) / 0.44);
  background: hsl(var(--primary) / 0.16);
  color: hsl(var(--primary));
  transform: translateY(-1px);
}

.admin-panel-refresh-button svg {
  color: currentColor;
}

.admin-panel-refresh-button .icon-spin {
  animation-duration: 0.8s;
}

.title-group h1 {
  margin: 0;
  font-size: 1.9rem;
  font-weight: 700;
  letter-spacing: -0.02em;
}

.title-group p {
  margin: 4px 0 0;
  color: hsl(var(--muted-foreground));
  font-size: 0.95rem;
}

.controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}
.metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  padding: 20px 24px 28px;
}

.metric-card {
  padding: 18px 20px;
  border-radius: 16px;
  border: 1px solid hsl(var(--border) / 0.7);
  background: hsl(var(--card) / 0.9);
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-height: 110px;
  box-shadow: inset 0 0 0 1px hsl(var(--card) / 0.4);
}

.metric-card h3 {
  margin: 0;
  font-size: 0.95rem;
  font-weight: 600;
  color: hsl(var(--muted-foreground));
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.metric-value {
  font-size: 1.9rem;
  font-weight: 700;
  color: hsl(var(--foreground));
  font-family: 'JetBrains Mono', 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
}

/* Quick Stats 专用布局：小屏 1 列，大屏 3 列，避免出现 2 列布局 */
.quick-stats-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 16px;
  padding: 20px 24px 28px;
}
/* 中等屏幕增加 2 列级别（避免 1 -> 3 的跳变） */
@media (min-width: 700px) {
  .quick-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
/* 900px 左右希望一行放下 3 个：提前到 860px 起三列，并适当收紧间距与内边距 */
@media (min-width: 860px) {
  .quick-stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
  }
  .quick-stats-card {
    padding: 14px 16px;
    min-height: 96px;
  }
  .quick-stats-card h3 {
    font-size: 0.92rem;
  }
  .quick-stats-card .metric-value {
    font-size: 1.7rem;
  }
}
@media (min-width: 960px) {
  .quick-stats-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* Quick Stats 卡片内部不换行，保证“成功/合计”始终一行显示 */
.quick-stats-card {
  min-width: 0; /* 允许内部文本省略 */
}
.quick-stats-card .metric-value {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Quick Stats 字体在不同断点下的自适应（仅影响 Quick Stats） */
.quick-stats-card h3 {
  font-size: 0.9rem;
}
.quick-stats-card .metric-value {
  font-size: 1.6rem;
}
@media (min-width: 960px) {
  .quick-stats-card h3 {
    font-size: 0.95rem;
  }
  .quick-stats-card .metric-value {
    font-size: 1.9rem;
  }
}
@media (min-width: 1280px) {
  .quick-stats-card .metric-value {
    font-size: 2.1rem;
  }
}

.metric-subtitle {
  font-size: 0.85rem;
  color: hsl(var(--muted-foreground));
}

.token-stats {
  display: grid;
  grid-auto-flow: row; /* 明确按行铺排，避免意外流入多列 */
  grid-template-columns: 1fr !important; /* 小屏 1 列 */
  gap: 16px;
  padding: 0;
}
/* 中屏（≈700px 以上）2 列，禁止出现 3 列 */
@media (min-width: 700px) {
  .token-stats {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }
}
/* 大屏 4 列（4 个指标整行） */
@media (min-width: 1120px) {
  .token-stats {
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  }
}
.token-stat {
  background: hsl(var(--card) / 0.9);
  border-radius: 16px;
  border: 1px solid hsl(var(--border) / 0.7);
  box-shadow: inset 0 0 0 1px hsl(var(--card) / 0.35);
  padding: 18px 20px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 10px;
  min-height: 136px;
  min-width: 0; /* 允许在网格列内收缩，防止撑开导致多列错位 */
}
.token-stat .stat-title {
  margin: 0;
  font-size: 0.82rem;
  font-weight: 600;
  color: hsl(var(--muted-foreground));
  text-transform: uppercase;
  letter-spacing: 0.04em;
}
.token-stat .stat-value {
  font-size: 1.9rem;
  font-weight: 700;
  color: hsl(var(--foreground));
  line-height: 1.15;
  word-break: break-word;
}

.quota-stat-card {
  border-radius: 16px;
  border: 1px solid hsl(var(--border) / 0.82);
  background: hsl(var(--card) / 0.95);
  padding: 16px 18px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.quota-stat-label {
  font-size: 0.9rem;
  font-weight: 600;
  color: hsl(var(--muted-foreground));
}

.quota-stat-value {
  font-size: 1.6rem;
  font-weight: 700;
  color: hsl(var(--foreground));
  line-height: 1.2;
}

.quota-stat-value span {
  font-size: 0.95rem;
  font-weight: 500;
  color: hsl(var(--muted-foreground));
  margin-left: 4px;
}

.quota-stat-description {
  font-size: 0.85rem;
  color: hsl(var(--muted-foreground));
}

.quota-stat-reset {
  font-size: 0.78rem;
  color: hsl(var(--muted-foreground));
}

.token-panel-header {
  align-items: flex-start;
  gap: 18px;
  flex-wrap: wrap;
}
.token-period-controls {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  flex-wrap: wrap;
  margin-left: auto;
}
.token-period-warning {
  margin-top: 12px;
  margin-bottom: 12px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  font-size: 0.9rem;
  border-radius: 10px;
  width: 100%;
  max-width: none;
  align-self: stretch;
}
.token-warning-icon {
  color: hsl(var(--warning));
}
.token-period-control {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 160px;
}
.token-period-control label {
  font-size: 0.82rem;
  font-weight: 600;
  color: hsl(var(--muted-foreground));
  letter-spacing: 0.03em;
  text-transform: uppercase;
}
.token-since-label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 180px;
  font-size: 0.85rem;
  color: hsl(var(--muted-foreground));
  align-self: flex-start;
}
.token-since-label strong {
  font-size: 1rem;
  color: hsl(var(--foreground));
  line-height: 1.2;
}

.token-groups-container {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  margin-bottom: 12px;
}

.token-groups-label {
  flex: 0 0 auto;
  font-size: 0.85rem;
  color: hsl(var(--muted-foreground));
  padding-top: 4px;
  white-space: nowrap;
}

.token-groups-row {
  flex: 1 1 auto;
  display: flex;
  align-items: flex-start; /* 展开为多行时，保持展开按钮与第一行对齐，不随高度居中漂移 */
  gap: 8px;
  min-width: 0;
}

.token-groups-list {
  flex: 1 1 auto;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;
  overflow-x: hidden; /* 保持单行但不出现横向滚动条 */
}

.token-groups-list-expanded {
  flex-wrap: wrap;
  overflow-x: visible;
}

.token-group-chip {
  border-radius: 999px;
  border: 1px solid hsl(var(--border) / 0.9);
  background: hsl(var(--card) / 0.92);
  padding: 4px 10px;
  font-size: 0.85rem;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  white-space: nowrap;
}

.token-group-chip-active {
  background: linear-gradient(105deg, hsl(var(--primary)) 0%, hsl(var(--secondary) / 0.9) 55%, hsl(var(--secondary)) 100%);
  border-color: transparent;
  color: hsl(var(--primary-foreground));
  box-shadow: 0 4px 12px hsl(var(--primary) / 0.28);
}

.token-group-toggle {
  width: 28px;
  height: 28px;
  padding: 4px;
  justify-content: center;
  flex-shrink: 0;
}

.token-group-toggle-active {
  background: hsl(var(--primary) / 0.14);
}

.token-group-name {
  max-width: 220px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.token-group-count {
  font-weight: 600;
  font-size: 0.8rem;
  opacity: 0.85;
}

/* 小屏优化（< 752px）：将筛选控件放到标题下一行并左对齐，避免被推挤 */
@media (max-width: 752px) {
  .token-panel-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
  .token-period-controls {
    margin-left: 0;
    width: 100%;
    justify-content: flex-start;
  }
  /* 确保标题与描述在小屏左对齐，不出现居中 */
  .token-panel-header > div:first-child {
    width: 100%;
    text-align: left;
  }
  .token-panel-header h2,
  .token-panel-header .panel-description {
    text-align: left;
    margin: 0;
  }
  .token-groups-container {
    flex-direction: column;
    align-items: flex-start;
  }
  .token-groups-label {
    padding-top: 0;
  }
  .token-groups-row {
    width: 100%;
  }
}
.token-metrics-grid {
  padding: 0;
}

.panel {
  padding: 20px 24px 28px;
}

.panel + .panel {
  margin-top: -8px;
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.panel-header h2 {
  margin: 0;
  font-size: 1.2rem;
  font-weight: 700;
}

.panel-description {
  margin: 0;
  color: hsl(var(--muted-foreground));
  font-size: 0.92rem;
}

/* Key/value information grid for compact readable summary */
.kv-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px 16px;
}
.kv-item {
  display: grid;
  grid-template-columns: 110px 1fr;
  align-items: center;
  gap: 8px;
  min-height: 40px;
}
.kv-label {
  color: hsl(var(--muted-foreground));
  font-weight: 600;
}
.kv-value {
  min-width: 0; /* enable ellipsis */
}
.kv-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.code-chip {
  display: inline-block;
  padding: 2px 6px;
  border-radius: 8px;
  border: 1px solid hsl(var(--border) / 0.82);
  background: hsl(var(--muted) / 0.52);
}

.token-info-section {
  padding: 20px 24px 28px;
}
.token-info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 16px;
}
.token-info-card {
  padding: 14px 16px;
  border-radius: 14px;
  border: 1px solid hsl(var(--border) / 0.82);
  background: hsl(var(--card) / 0.92);
  box-shadow: inset 0 0 0 1px hsl(var(--card) / 0.35);
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-height: 76px;
}
.token-info-label {
  font-size: 0.82rem;
  font-weight: 600;
  color: hsl(var(--muted-foreground));
  letter-spacing: 0.03em;
  text-transform: uppercase;
}
.token-info-value {
  font-size: 1rem;
  font-weight: 600;
  color: hsl(var(--foreground));
  min-width: 0;
  overflow: hidden;
}
.token-info-note {
  display: inline-block;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.token-metric-card {
  gap: 10px;
}

.table-wrapper {
  overflow-x: auto;
  border-radius: 14px;
  border: 1px solid hsl(var(--border) / 0.76);
  background: hsl(var(--card) / 0.9);
}

.jobs-table-wrapper {
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
  min-width: 640px;
}

/* Token detail table column sizing to avoid Error column expanding too much */
.token-detail-table {
  table-layout: auto;
  width: 100%;
}
.token-detail-table th:nth-child(1),
.token-detail-table td:nth-child(1) {
  min-width: 16ch;
  width: 18ch;
}
.token-detail-table th:nth-child(2),
.token-detail-table td:nth-child(2),
.token-detail-table th:nth-child(3),
.token-detail-table td:nth-child(3) {
  min-width: 7ch;
  text-align: center;
}
.token-detail-table th:nth-child(4),
.token-detail-table td:nth-child(4) {
  text-align: right;
}
.token-detail-table td:nth-child(4) .status-badge {
  white-space: nowrap;
  display: inline-flex;
}

/* 让“Result”列的按钮组整体靠右，箭头不会拥挤 */
.token-detail-table td:nth-child(4) .log-result-button {
  width: 100%;
  justify-content: flex-end;
}
.token-detail-table th:nth-child(5),
.token-detail-table td:nth-child(5) {
  min-width: 20ch;
  max-width: 36ch;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: hsl(var(--muted-foreground));
}

/* Admin Recent Requests table: keep only the Error column truncatable */
.admin-logs-table {
  table-layout: auto;
  width: 100%;
}
.admin-logs-table th,
.admin-logs-table td {
  white-space: nowrap; /* 其他列一律不换行 */
}
/* Fix the Error column (6th) to a reasonable width and ellipsize overflow */
.admin-logs-table th:last-child,
.admin-logs-table td:last-child {
  width: 36ch;
  max-width: 36ch;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap; /* 不允许换行，超出显示省略号 */
  color: hsl(var(--muted-foreground));
}
/* 确保“结果”列徽章不换行并右对齐（兼容 4/5 列位置） */
.admin-logs-table td:nth-child(6) .status-badge,
.admin-logs-table td:nth-child(5) .status-badge,
.admin-logs-table td:nth-child(4) .status-badge {
  white-space: nowrap;
  display: inline-flex;
}
.admin-logs-table td:nth-child(6) .log-result-button,
.admin-logs-table td:nth-child(5) .log-result-button,
.admin-logs-table td:nth-child(4) .log-result-button {
  width: 100%;
  justify-content: flex-end;
}

/* token leaderboard styles consolidated near dedicated section below */

.admin-logs-table .log-key-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 2px 12px;
  border-radius: 999px;
  background: hsl(var(--accent) / 0.14);
  color: hsl(var(--foreground));
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 0.95rem;
}

.admin-logs-table .log-key-pill code {
  color: inherit;
}

.log-time-cell {
  position: relative;
  display: inline-flex;
  align-items: center;
  font-variant-numeric: tabular-nums;
  overflow: visible;
}

.log-time-trigger {
  border: none;
  background: transparent;
  padding: 0;
  font: inherit;
  color: inherit;
  cursor: pointer;
}

.log-time-trigger:focus-visible {
  outline: 2px solid hsl(var(--secondary) / 0.9);
  outline-offset: 2px;
}

.log-time-main {
  font-size: 0.95rem;
  color: hsl(var(--foreground));
}

.log-time-bubble {
  position: absolute;
  left: calc(100% + 10px);
  top: 50%;
  transform: translateY(-50%) scale(0.95);
  background: hsl(var(--foreground));
  color: hsl(var(--primary-foreground));
  padding: 4px 12px;
  border-radius: 999px;
  white-space: nowrap;
  font-size: 0.85rem;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s ease, transform 0.15s ease;
  z-index: 5;
}

.log-time-cell:hover .log-time-bubble,
.log-time-cell:focus-within .log-time-bubble {
  opacity: 1;
  transform: translateY(-50%) scale(1);
}

.key-validation-detail {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.key-validation-modal {
  padding: clamp(8px, 1.6vh, 16px) clamp(8px, 2vw, 16px);
  overflow-x: hidden;
  place-items: start center;
}
.key-validation-modal .modal-box,
.key-validation-modal .key-validation-modal-box {
  width: min(calc(100vw - 2rem), 1120px);
  max-width: min(calc(100vw - 2rem), 1120px);
  height: auto;
  max-height: min(calc(100dvh - 1rem), 860px);
  padding: 0;
  overflow-x: hidden;
  border-radius: 20px;
}

.key-validation-modal .key-validation-modal-box > .flex {
  max-height: inherit;
  min-height: 0;
}

.key-validation-header {
  flex-shrink: 0;
}

.key-validation-modal-body {
  overscroll-behavior: contain;
}

.key-validation-segmented-bar {
  width: 100%;
  height: 12px;
  border-radius: 999px;
  overflow: hidden;
  display: flex;
  background: hsl(var(--muted) / 0.7);
  box-shadow: inset 0 0 0 1px hsl(var(--border) / 0.82);
}

.key-validation-segment {
  height: 100%;
  min-width: 2px;
}

.key-validation-segment.is-pending {
  background: hsl(var(--muted-foreground) / 0.82);
}

.key-validation-segment.is-ok {
  background: hsl(var(--success));
}

.key-validation-segment.is-exhausted {
  background: hsl(var(--warning));
}

.key-validation-segment.is-invalid {
  background: hsl(var(--destructive));
}

.key-validation-segment.is-error {
  background: hsl(var(--secondary) / 0.9);
}

.key-validation-segment-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  font-size: 0.8rem;
}

.key-validation-segment-stat {
  appearance: none;
  color: inherit;
  font: inherit;
  text-align: left;
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  opacity: 0.92;
  background: hsl(var(--border) / 0.7);
  border: 1px solid hsl(var(--border) / 0.82);
  border-radius: 999px;
  padding: 4px 10px;
  line-height: 1.25;
  position: relative;
  cursor: pointer;
  transition: filter 0.15s ease, opacity 0.15s ease, box-shadow 0.15s ease, transform 0.15s ease;
}

.key-validation-segment-stat.has-rate {
  cursor: pointer;
}

.key-validation-segment-stat:focus-visible {
  outline: 2px solid hsl(var(--primary) / 0.52);
  outline-offset: 2px;
}

.key-validation-segment-stat.is-active {
  opacity: 1;
  filter: none;
  transform: translateY(-1px);
  box-shadow: 0 0 0 2px hsl(var(--border) / 0.96);
}

.key-validation-segment-stat.is-dimmed {
  opacity: 0.55;
  filter: grayscale(0.78) saturate(0.45);
}

.key-validation-stat-bubble {
  position: absolute;
  left: 10px;
  top: calc(100% + 6px);
  background: hsl(var(--foreground));
  color: hsl(var(--primary-foreground));
  border-radius: 999px;
  padding: 4px 10px;
  font-size: 0.76rem;
  line-height: 1.1;
  white-space: nowrap;
  opacity: 0;
  transform: translateY(-2px) scale(0.96);
  pointer-events: none;
  transition: opacity 0.15s ease, transform 0.15s ease;
  z-index: 25;
  box-shadow: 0 10px 24px hsl(var(--foreground) / 0.28);
}

.key-validation-stat-bubble::before {
  content: "";
  position: absolute;
  left: 14px;
  top: -5px;
  width: 10px;
  height: 10px;
  background: hsl(var(--foreground));
  transform: rotate(45deg);
  border-top-left-radius: 2px;
}

.key-validation-segment-stat.has-rate:hover .key-validation-stat-bubble,
.key-validation-segment-stat.has-rate:focus-within .key-validation-stat-bubble,
.key-validation-segment-stat.has-rate:focus-visible .key-validation-stat-bubble {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.key-validation-segment-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: hsl(var(--muted-foreground) / 0.82);
  flex-shrink: 0;
}

.key-validation-segment-stat.is-pending .key-validation-segment-dot {
  background: hsl(var(--muted-foreground) / 0.82);
}

.key-validation-segment-stat.is-ok .key-validation-segment-dot {
  background: hsl(var(--success));
}

.key-validation-segment-stat.is-exhausted .key-validation-segment-dot {
  background: hsl(var(--warning));
}

.key-validation-segment-stat.is-invalid .key-validation-segment-dot {
  background: hsl(var(--destructive));
}

.key-validation-segment-stat.is-error .key-validation-segment-dot {
  background: hsl(var(--secondary) / 0.9);
}

.key-validation-segment-stat.is-duplicate .key-validation-segment-dot {
  background: hsl(var(--muted-foreground));
}

.key-validation-segment-stat.is-ok {
  background: hsl(var(--success) / 0.14);
  border-color: hsl(var(--success) / 0.3);
}

.key-validation-segment-stat.is-exhausted {
  background: hsl(var(--warning) / 0.16);
  border-color: hsl(var(--warning) / 0.32);
}

.key-validation-segment-stat.is-invalid {
  background: hsl(var(--destructive) / 0.14);
  border-color: hsl(var(--destructive) / 0.3);
}

.key-validation-segment-stat.is-error {
  background: hsl(var(--secondary) / 0.18);
  border-color: hsl(var(--secondary) / 0.32);
}

.key-validation-segment-stat.is-pending,
.key-validation-segment-stat.is-duplicate {
  background: hsl(var(--muted) / 0.58);
  border-color: hsl(var(--border) / 0.9);
}

.key-validation-table-shell {
  overflow: hidden;
}

.key-validation-table-scroll {
  overflow-x: hidden;
}

.key-validation-table {
  width: 100%;
  min-width: 0 !important;
  table-layout: fixed;
}

.key-validation-table th,
.key-validation-table td {
  padding: 8px 10px;
  font-size: 0.84rem;
  line-height: 1.3;
  vertical-align: middle;
}

.key-validation-table th:nth-child(1),
.key-validation-table td:nth-child(1),
.key-validation-table th:nth-child(2),
.key-validation-table td:nth-child(2) {
  overflow-wrap: anywhere;
}

.key-validation-detail-disclosure > summary::-webkit-details-marker {
  display: none;
}

.key-validation-footer {
  flex-shrink: 0;
}

.key-validation-footer-primary .btn {
  min-width: 0;
}

.key-validation-detail-trigger {
  cursor: help;
}

.key-validation-detail-trigger:focus-visible {
  outline: 2px solid hsl(var(--primary) / 0.62);
  outline-offset: 2px;
  border-radius: 999px;
}

.key-validation-bubble {
  position: absolute;
  left: 0;
  top: calc(100% + 8px);
  transform: scale(0.98);
  background: hsl(var(--n) / 0.96);
  color: hsl(var(--nc) / 1);
  border: 1px solid hsl(var(--n) / 0.12);
  padding: 12px 14px;
  border-radius: 16px;
  width: max-content;
  max-width: min(620px, calc(100vw - 64px));
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 0.85rem;
  line-height: 1.35;
  opacity: 0;
  pointer-events: auto;
  user-select: text;
  transition: opacity 0.15s ease, transform 0.15s ease;
  z-index: 20;
  box-shadow: 0 14px 40px hsl(var(--foreground) / 0.2);
}

.key-validation-bubble::before {
  content: "";
  position: absolute;
  left: 18px;
  top: -7px;
  width: 14px;
  height: 14px;
  transform: rotate(45deg);
  background: hsl(var(--n) / 0.96);
  border-left: 1px solid hsl(var(--n) / 0.12);
  border-top: 1px solid hsl(var(--n) / 0.12);
}

.key-validation-detail:hover .key-validation-bubble,
.key-validation-detail:focus-within .key-validation-bubble {
  opacity: 1;
  transform: scale(1);
}

@media (max-width: 767px) {
  .key-validation-modal {
    padding: 0;
    place-items: end center;
  }

  .key-validation-modal .modal-box,
  .key-validation-modal .key-validation-modal-box {
    width: 100%;
    max-width: 100%;
    height: 100%;
    max-height: 100%;
    border-radius: 20px 20px 0 0;
  }

  .key-validation-modal-body {
    padding: 10px 12px;
  }

  .key-validation-footer {
    padding: 10px 12px;
  }
}

@media (max-width: 430px) {
  .key-validation-footer-primary {
    width: 100%;
    flex-direction: column;
    align-items: stretch;
  }

  .key-validation-footer-primary .btn {
    width: 100%;
    flex: 0 0 auto;
    white-space: nowrap;
    justify-content: center;
    min-height: 48px;
    line-height: 1.2;
  }

  .key-validation-table th,
  .key-validation-table td {
    padding: 7px 8px;
  }
}

.log-token-link code {
  color: hsl(var(--foreground));
}

.table-pagination {
  padding: 12px 16px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
  border-top: 1px solid hsl(var(--border) / 0.76);
}
.table-pagination span {
  font-size: 0.92rem;
}
.table-pagination select {
  min-width: 90px;
}

thead {
  background: hsl(var(--primary) / 0.08);
}

th,
td {
  padding: 12px 16px;
  text-align: left;
  font-size: 0.9rem;
  border-bottom: 1px solid hsl(var(--border) / 0.76);
}

tbody tr:last-child td {
  border-bottom: none;
}

tbody tr:hover {
  background: hsl(var(--accent) / 0.1);
}

.log-result-button {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  justify-content: flex-end; /* 右对齐内容，让箭头靠右 */
  width: 100%; /* 占满单元格，避免内容拥挤 */
  padding: 0;
  border: none;
  background: none;
  cursor: pointer;
  color: inherit;
  font: inherit;
}

.log-result-button:focus-visible {
  outline: 2px solid hsl(var(--primary) / 0.62);
  outline-offset: 2px;
  border-radius: 999px;
}

.log-result-button .status-badge {
  margin: 0;
}

.log-result-button-active .status-badge {
  box-shadow: 0 0 0 2px hsl(var(--primary) / 0.28);
}

.log-result-icon {
  color: hsl(var(--muted-foreground));
}

/* Jobs table: compact message cell with ellipsis + expand toggle */
.jobs-message-button {
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  width: 100%;
  padding: 0;
  border: none;
  background: none;
  cursor: pointer;
  font: inherit;
  color: inherit;
}

.jobs-table {
  width: 100%;
  table-layout: fixed;
  min-width: 0;
}

.tokens-table {
  table-layout: fixed;
}

.tokens-table th,
.tokens-table td {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.tokens-table th:nth-child(1),
.tokens-table td:nth-child(1) {
  width: 10%;
}

.tokens-table th:nth-child(3),
.tokens-table td:nth-child(3) {
  width: 12ch;
}

/* Token table: keep the actions column wide enough for icon buttons */
.tokens-table th:nth-child(6),
.tokens-table td:nth-child(6) {
  width: 220px;
}

.tokens-table .jobs-message-cell {
  max-width: none;
  overflow: visible;
}

.tokens-table .table-actions {
  justify-content: flex-end;
  flex-wrap: nowrap;
}

.jobs-table:not(.tokens-table) th:nth-child(7),
.jobs-table:not(.tokens-table) td.jobs-message-cell {
  width: 24%;
}

.jobs-message-cell {
  max-width: 0;
}

.table-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

.jobs-message-button:focus-visible {
  outline: 2px solid hsl(var(--primary) / 0.62);
  outline-offset: 2px;
  border-radius: 999px;
}

.jobs-message-text {
  flex: 1 1 auto;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-align: left;
}

.jobs-message-icon {
  flex-shrink: 0;
  color: hsl(var(--muted-foreground) / 0.82);
}

.jobs-message-button-active .jobs-message-text {
  font-weight: 500;
  color: hsl(var(--foreground));
}

/* Admin / API Keys batch input: when overlay is expanded, hide collapsed controls but keep layout for anchoring. */
.keys-batch-collapsed.is-hidden {
  opacity: 0;
  pointer-events: none;
  user-select: none;
}

/* Admin / API Keys batch overlay: animate in so it feels like the input expands in-place. */
.keys-batch-overlay {
  /* Keep in sync with `KEYS_BATCH_CLOSE_ANIMATION_MS` in AdminDashboard.tsx. */
  --keys-batch-close-ms: 200ms;
  transform-origin: top right;
  animation: keys-batch-overlay-in 140ms ease-out;
  will-change: transform, opacity;
  transition: opacity var(--keys-batch-close-ms) ease-in, transform var(--keys-batch-close-ms) ease-in;
}

.keys-batch-overlay.is-closing {
  opacity: 0;
  transform: translateY(4px) scaleX(0.98) scaleY(0.96);
}

@media (prefers-reduced-motion: reduce) {
  .keys-batch-overlay {
    animation: none;
    transition: none;
  }
}

@keyframes keys-batch-overlay-in {
  from {
    opacity: 0;
    transform: translateY(4px) scaleX(0.98) scaleY(0.96);
  }
  to {
    opacity: 1;
    transform: translateY(0) scaleX(1) scaleY(1);
  }
}

/* Jobs table: prevent start time from wrapping and overflowing (jobs list only, not tokens table) */
.jobs-table:not(.tokens-table) th:nth-child(6),
.jobs-table:not(.tokens-table) td:nth-child(6) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 22ch;
}

/* Jobs table: keep type column inside its cell (jobs list only, not tokens table) */
.jobs-table:not(.tokens-table) th:nth-child(2),
.jobs-table:not(.tokens-table) td:nth-child(2) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.jobs-table .log-time-bubble {
  left: 50%;
  transform: translate(-50%, -50%) scale(0.95);
  max-width: 260px;
  white-space: normal;
}

/* Job type detail pill with hover bubble showing raw code */
.job-type-pill {
  position: relative;
  display: inline-flex;
  align-items: center;
  font-variant-numeric: tabular-nums;
}

.job-type-trigger {
  border: none;
  background: transparent;
  padding: 0;
  font: inherit;
  color: inherit;
  cursor: pointer;
}

.job-type-main {
  font-size: 0.92rem;
}

.job-type-bubble {
  position: absolute;
  left: calc(100% + 8px);
  top: 50%;
  transform: translateY(-50%) scale(0.95);
  background: hsl(var(--foreground));
  color: hsl(var(--primary-foreground));
  padding: 3px 10px;
  border-radius: 999px;
  white-space: nowrap;
  font-size: 0.8rem;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s ease, transform 0.15s ease;
  z-index: 5;
}

.job-type-pill:hover .job-type-bubble,
.job-type-pill:focus-within .job-type-bubble {
  opacity: 1;
  transform: translateY(-50%) scale(1);
}

.log-details-row td {
  background: hsl(var(--muted) / 0.62);
  border-bottom: none;
}

.log-details-panel {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.log-details-summary {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  font-size: 0.85rem;
  color: hsl(var(--muted-foreground));
}

.log-details-summary > div {
  min-width: 180px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.log-details-label {
  font-weight: 600;
  text-transform: uppercase;
  font-size: 0.72rem;
  color: hsl(var(--muted-foreground));
  letter-spacing: 0.04em;
}

.log-details-value {
  font-family: 'JetBrains Mono', 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 0.82rem;
  word-break: break-all;
}

.log-details-body {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 16px;
}

.log-details-section header {
  margin: 0 0 6px;
  font-size: 0.78rem;
  color: hsl(var(--muted-foreground));
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.log-details-section pre {
  margin: 0;
  padding: 12px;
  background: hsl(var(--muted) / 0.58);
  border-radius: 10px;
  max-height: 220px;
  overflow: auto;
  font-family: 'JetBrains Mono', 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 0.82rem;
  white-space: pre-wrap;
  word-break: break-word;
}

.log-details-headers {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
}

.log-details-section ul {
  margin: 0;
  padding-left: 18px;
  font-size: 0.82rem;
  color: hsl(var(--muted-foreground));
}

.log-details-section ul li {
  margin: 4px 0;
}

tbody .log-details-row:hover {
  background: hsl(var(--muted) / 0.62);
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 0.78rem;
  font-weight: 600;
  letter-spacing: 0.02em;
}

.status-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  padding: 2px 10px;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.01em;
  text-transform: none;
  text-align: center;
  min-width: 72px;
}

.status-pill-success {
  /* align with normal quota pill (teal) */
  background: hsl(var(--success) / 0.16);
  color: hsl(var(--success));
}

.status-pill-warning {
  /* align with hourly quota pill */
  background: hsl(var(--warning) / 0.2);
  color: hsl(var(--warning));
}

.status-pill-error {
  /* align with daily quota pill */
  background: hsl(var(--destructive) / 0.18);
  color: hsl(var(--destructive));
}

.status-pill-info {
  /* align with monthly quota pill */
  background: hsl(var(--secondary) / 0.18);
  color: hsl(var(--secondary));
}

.status-pill-neutral {
  background: hsl(var(--border) / 0.76);
  color: hsl(var(--muted-foreground));
}

.kpi-up {
  color: hsl(var(--success));
}

.kpi-down {
  color: hsl(var(--destructive));
}

.empty-state {
  padding: 32px;
  text-align: center;
  color: hsl(var(--muted-foreground));
}

/* Inside table wrappers, keep empty states flat (avoid double border/rounded "alert" card). */
.table-wrapper .empty-state.alert {
  display: block;
  background: transparent;
  border: 0;
  border-radius: 0;
  box-shadow: none;
}

/* Reserve a stable slot after token ID to avoid layout shift when toggling status icon */
.token-status-slot {
  display: inline-block;
  width: 16px;
  height: 16px;
  line-height: 0;
}

.token-status-icon {
  color: hsl(var(--destructive));
}

.token-quota-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  padding: 2px 10px;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.01em;
  text-transform: none;
  background: hsl(var(--success) / 0.16);
  color: hsl(var(--success));
  min-width: 80px;
  text-align: center;
}

.token-quota-pill-hour {
  background: hsl(var(--warning) / 0.2);
  color: hsl(var(--warning));
}

.token-quota-pill-day {
  background: hsl(var(--destructive) / 0.18);
  color: hsl(var(--destructive));
}

.token-quota-pill-month {
  background: hsl(var(--secondary) / 0.18);
  color: hsl(var(--secondary));
}

.error-banner {
  padding: 14px 18px;
  border-radius: 12px;
  background: hsl(var(--destructive) / 0.14);
  color: hsl(var(--destructive));
  border: 1px solid hsl(var(--destructive) / 0.3);
  margin-top: -12px;
}

.link-button {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  color: inherit;
  cursor: pointer;
}

.link-button code {
  text-decoration: underline;
  text-underline-offset: 2px;
}

.app-footer {
  padding: 0 24px 12px;
  color: hsl(var(--muted-foreground) / 0.82);
  font-size: 0.85rem;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 12px;
}

.app-footer .footer-meta {
  opacity: 0.85;
  display: inline-flex;
  align-items: center;
}

.app-footer .footer-link {
  color: inherit;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  line-height: 1;
}

.app-footer .footer-link:hover {
  text-decoration: underline;
}

.app-footer .footer-link-icon {
  display: block;
  flex-shrink: 0;
}

@media (max-width: 768px) {
  .app-shell {
    padding: 20px 16px 36px;
  }

  .app-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 14px;
  }

  .admin-panel-header {
    gap: 10px;
    padding: 14px 14px;
  }

  .admin-panel-header-main {
    width: 100%;
  }

  .admin-panel-header-subtitle {
    max-width: 100%;
  }

  .admin-panel-header-time {
    font-size: 0.74rem;
  }

  .admin-panel-header-time-label {
    display: none;
  }

  .admin-panel-header-time-value {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .admin-panel-header-side {
    width: 100%;
    align-items: stretch;
    gap: 6px;
  }

  .admin-panel-header-tools {
    max-width: 100%;
    justify-content: space-between;
  }

  .admin-panel-header-actions {
    width: 100%;
    justify-content: space-between;
    gap: 8px;
  }

  .admin-language-switcher {
    gap: 6px;
    min-width: 0;
  }

  .user-badge {
    max-width: 100%;
    min-width: 0;
  }

  .user-badge span {
    max-width: 18ch;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .admin-panel-header .theme-toggle-trigger,
  .admin-panel-header .language-switcher-trigger {
    min-height: 2.1rem;
    padding-inline: 0.58rem;
  }

  .admin-panel-refresh-button {
    align-self: flex-start;
    min-width: 104px;
  }

  .controls {
    width: 100%;
    justify-content: flex-start;
    flex-wrap: wrap;
  }

  .panel-actions .segmented-tabs {
    width: 100%;
    justify-content: flex-start;
  }

  .segmented-tab {
    min-height: 1.86rem;
    padding: 0 14px;
    font-size: 0.84rem;
  }

  .metrics-grid {
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  }
  .token-stats {
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  }

  table {
    min-width: 540px;
  }

  .kv-item {
    grid-template-columns: 96px 1fr;
  }
}

/* Extra-compact layout for small phones */
@media (max-width: 640px) {
  .app-shell {
    padding: 16px 12px 28px;
  }
  .public-home-hero {
    padding: 28px 14px;
  }
  .panel {
    padding: 16px 14px 22px;
  }
  .metrics-grid {
    gap: 12px;
    padding: 14px 14px 20px;
  }
  .access-token-box {
    gap: 8px;
  }
  .access-stat {
    padding: 12px 14px;
  }
}
.access-panel {
  margin-top: 16px;
}

.access-panel-grid {
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.access-token-box {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.access-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.access-stat {
  border: 1px solid hsl(var(--border) / 0.82);
  border-radius: 14px;
  background: hsl(var(--card) / 0.92);
  padding: 14px 18px;
  min-width: 160px;
  flex: 1 1 160px;
}

.access-stat h4 {
  margin: 0;
  font-size: 0.85rem;
  color: hsl(var(--muted-foreground));
}

.access-stat p {
  margin: 8px 0 0;
  font-size: 1.35rem;
  font-weight: 700;
  color: hsl(var(--foreground));
  font-family: 'JetBrains Mono', 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
}

/* Rolling number styles */
.rolling-number {
  display: inline-flex;
  align-items: flex-end;
  line-height: 1;
}
.rolling-number .rn-probe {
  position: absolute;
  visibility: hidden;
  height: 1em;
  line-height: 1em;
}
.rolling-number .rn-sep {
  padding: 0 1px;
}
.rolling-number .rn-col {
  position: relative;
  overflow: hidden;
  width: 0.62em; /* tighter monospace width */
  height: 1em;
}
.rolling-number .rn-strip {
  display: flex;
  flex-direction: column;
  transition: transform 420ms cubic-bezier(0.25, 0.8, 0.25, 1);
  will-change: transform;
}
.rolling-number .rn-col.rn-down .rn-strip {
  transition: transform 420ms cubic-bezier(0.25, 0.8, 0.25, 1);
}
.rolling-number .rn-digit {
  display: block;
  height: 1em;
  line-height: 1em;
}
/* Token leaderboard */
.token-leaderboard-panel {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.token-leaderboard-toolbar {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
}

.token-leaderboard-filters {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.token-leaderboard-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
  flex-wrap: wrap;
}

.token-leaderboard-panel .chip {
  padding: 8px 12px;
  border-radius: 12px;
  border: 1px solid hsl(var(--border) / 0.96);
  background: hsl(var(--card) / 0.8);
  color: hsl(var(--foreground));
  cursor: pointer;
  transition: all 0.15s ease;
}

.token-leaderboard-panel .chip:hover {
  border-color: hsl(var(--primary) / 0.88);
}

.token-leaderboard-panel .chip-active {
  background: hsl(var(--primary) / 0.88);
  color: hsl(var(--primary-foreground));
  border-color: hsl(var(--primary) / 0.88);
}

.token-leaderboard-panel .chip-ghost {
  background: hsl(var(--border) / 0.76);
  color: hsl(var(--muted-foreground));
  border-style: dashed;
}

.token-leaderboard-panel {
  container-type: inline-size;
  container-name: token-usage-board;
}

.token-leaderboard-wrapper {
  overflow-x: auto;
}

.token-leaderboard-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: auto;
}

.token-leaderboard-table th,
.token-leaderboard-table td {
  padding: 10px 12px;
  text-align: left;
  vertical-align: top;
  font-variant-numeric: tabular-nums;
}

.token-leaderboard-table th {
  font-weight: 700;
  color: hsl(var(--foreground));
  background: hsl(var(--muted) / 0.58);
  border-bottom: 1px solid hsl(var(--border) / 0.82);
  white-space: nowrap;
}

.token-leaderboard-table td {
  border-bottom: 1px solid hsl(var(--border) / 0.76);
  white-space: nowrap;
}

.token-leaderboard-usage {
  font-weight: 700;
  color: hsl(var(--foreground));
}

.token-leaderboard-sub {
  color: hsl(var(--muted-foreground));
  font-size: 12px;
  margin-top: 4px;
  display: flex;
  gap: 10px;
  line-height: 1.35;
  flex-wrap: nowrap;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.token-leaderboard-sub span {
  display: inline-block;
  max-width: 22ch;
  overflow: hidden;
  text-overflow: ellipsis;
}

.link-button code {
  font-size: 14px;
  display: inline-block;
  max-width: 24ch;
  overflow: hidden;
  text-overflow: ellipsis;
}

.token-last-used {
  display: flex;
  flex-direction: column;
  gap: 2px;
  align-items: flex-start;
  white-space: nowrap;
  line-height: 1.25;
  max-width: clamp(160px, 18vw, 220px);
  overflow: hidden;
}

.token-last-used span {
  display: block;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
}

.token-last-time {
  color: hsl(var(--muted-foreground));
}

.token-disabled-pill {
  display: inline-block;
  margin-left: 8px;
  padding: 4px 6px;
  border-radius: 8px;
  background: hsl(var(--border) / 0.82);
  color: hsl(var(--muted-foreground));
  font-size: 12px;
}

@container token-usage-board (max-width: 1040px) {
  .token-leaderboard-table th,
  .token-leaderboard-table td {
    padding: 8px 9px;
    font-size: 13px;
  }
  .token-leaderboard-sub,
  .token-last-used .token-last-time {
    display: none;
  }
  .token-last-used {
    max-width: 180px;
  }
}

@container token-usage-board (max-width: 980px) {
  .token-leaderboard-table th,
  .token-leaderboard-table td {
    padding: 7px 8px;
    font-size: 12px;
  }
  .token-leaderboard-table code {
    font-size: 13px;
  }
}

.theme-toggle-trigger {
  text-transform: none;
  font-weight: 600;
}

.theme-toggle-label {
  letter-spacing: 0.01em;
}

.dark .surface {
  background: hsl(var(--card) / 0.88);
  border-color: hsl(var(--border) / 0.9);
  box-shadow: 0 20px 34px rgb(0 0 0 / 0.38);
}

.dark .metric-card,
.dark .token-stat,
.dark .token-info-card,
.dark .quota-stat-card,
.dark .access-stat,
.dark .table-wrapper,
.dark .guide-panel {
  background: hsl(var(--card) / 0.92);
  border-color: hsl(var(--border) / 0.85);
  box-shadow: inset 0 0 0 1px hsl(var(--border) / 0.45);
}

.dark .title-group p,
.dark .panel-description,
.dark .metric-subtitle,
.dark .token-info-label,
.dark .quota-stat-description,
.dark .quota-stat-reset,
.dark .quota-stat-value span,
.dark .guide-reference,
.dark .token-leaderboard-sub,
.dark .token-last-time,
.dark .jobs-message-icon,
.dark .log-details-label,
.dark .log-details-section header,
.dark .log-details-section ul,
.dark .log-time-main {
  color: hsl(var(--muted-foreground));
}

.dark .metric-value,
.dark .token-info-value,
.dark .quota-stat-value,
.dark .token-stat .stat-value,
.dark .token-leaderboard-usage,
.dark .token-leaderboard-table th,
.dark .log-token-link code,
.dark .log-details-value {
  color: hsl(var(--foreground));
}

.dark .user-badge {
  background: hsl(var(--muted) / 0.85);
  color: hsl(var(--foreground));
}

.dark .user-badge-admin {
  background: hsl(var(--warning) / 0.18);
  color: hsl(var(--warning));
}

.dark .admin-panel-header-time {
  color: hsl(var(--muted-foreground));
}

.dark .admin-panel-header-time-icon {
  color: hsl(var(--muted-foreground) / 0.9);
}

.dark .admin-panel-header-time-value {
  color: hsl(var(--foreground) / 0.78);
}

.dark .admin-panel-refresh-button {
  border-color: hsl(var(--primary) / 0.42);
  background: hsl(var(--primary) / 0.16);
}

.dark .admin-panel-refresh-button:hover:not(:disabled) {
  border-color: hsl(var(--primary) / 0.62);
  background: hsl(var(--primary) / 0.24);
}

.dark .language-flag {
  background: hsl(var(--card));
  box-shadow: 0 0 0 1px hsl(var(--border) / 0.8), 0 2px 8px rgb(0 0 0 / 0.35);
}

.dark .language-option.active {
  background: hsl(var(--primary) / 0.2);
  color: hsl(var(--primary));
}

.dark .language-option:hover {
  background: hsl(var(--accent) / 0.2);
}

.dark .hero-title {
  background: linear-gradient(105deg, hsl(var(--primary)) 0%, hsl(var(--accent)) 38%, hsl(var(--secondary)) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.dark thead {
  background: hsl(var(--muted) / 0.45);
}

.dark th,
.dark td {
  border-bottom-color: hsl(var(--border) / 0.65);
}

.dark tbody tr:hover {
  background: hsl(var(--accent) / 0.14);
}

.dark .log-details-row td,
.dark tbody .log-details-row:hover {
  background: hsl(var(--muted) / 0.4);
}

.dark .error-banner {
  background: hsl(var(--destructive) / 0.18);
  border-color: hsl(var(--destructive) / 0.35);
  color: hsl(var(--destructive));
}

.dark .token-quota-pill {
  background: hsl(var(--success) / 0.16);
  color: hsl(var(--success));
}

.dark .token-quota-pill-hour {
  background: hsl(var(--warning) / 0.18);
  color: hsl(var(--warning));
}

.dark .token-quota-pill-day {
  background: hsl(var(--destructive) / 0.18);
  color: hsl(var(--destructive));
}

.dark .token-quota-pill-month {
  background: hsl(var(--secondary) / 0.24);
  color: hsl(var(--secondary));
}

.dark .public-home-footer {
  border-color: hsl(var(--border) / 0.8);
}

.dark .public-home-footer a:hover,
.dark .guide-reference a,
.dark .footer-version a {
  color: hsl(var(--primary));
}

.dark .table-wrapper .empty-state.alert {
  color: hsl(var(--muted-foreground));
}

.dark .token-leaderboard-table th {
  background: hsl(var(--muted) / 0.35);
  border-bottom-color: hsl(var(--border) / 0.75);
}

.dark .token-leaderboard-table td {
  border-bottom-color: hsl(var(--border) / 0.6);
}

@layer components {
  .app-shell {
    max-width: 1280px;
    padding: 28px 22px 44px;
    gap: 20px;
  }

  .surface {
    background:
      linear-gradient(180deg, hsl(var(--card) / 0.95) 0%, hsl(var(--card) / 0.9) 100%);
    border: 1px solid hsl(var(--border) / 0.86);
    border-radius: 18px;
    box-shadow:
      0 18px 36px -28px hsl(var(--foreground) / 0.4),
      inset 0 1px 0 hsl(var(--background) / 0.85);
    backdrop-filter: blur(12px);
  }

  .public-home-hero {
    padding: clamp(28px, 6vw, 50px) clamp(16px, 4vw, 32px);
    gap: 14px;
  }

  .hero-title,
  .auth-title {
    background: linear-gradient(104deg, hsl(var(--primary)) 0%, hsl(var(--accent)) 50%, hsl(var(--secondary)) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .public-home-description,
  .public-home-tagline,
  .title-group p,
  .panel-description,
  .metric-subtitle,
  .token-info-label,
  .quota-stat-description,
  .quota-stat-reset,
  .token-leaderboard-sub,
  .token-last-time,
  .app-footer,
  .footer-version {
    color: hsl(var(--muted-foreground));
  }

  .language-switcher-trigger,
  .theme-toggle-trigger {
    border: 1px solid hsl(var(--border) / 0.9);
    background: hsl(var(--card) / 0.84);
    color: hsl(var(--foreground));
    border-radius: 999px;
    padding-inline: 0.7rem;
    min-height: 2.2rem;
  }

  .theme-toggle-trigger:hover,
  .language-switcher-trigger:hover {
    background: hsl(var(--accent) / 0.26);
    border-color: hsl(var(--primary) / 0.35);
  }

  .language-flag {
    background: hsl(var(--card));
    box-shadow: 0 0 0 1px hsl(var(--border) / 0.8), 0 4px 10px hsl(var(--foreground) / 0.12);
  }

  .language-option {
    color: hsl(var(--foreground) / 0.9);
  }

  .language-option.active {
    background: hsl(var(--primary) / 0.14);
    color: hsl(var(--primary));
  }

  .language-option:hover {
    background: hsl(var(--accent) / 0.22);
  }

  .metric-card,
  .access-stat,
  .token-stat,
  .token-info-card,
  .quota-stat-card,
  .table-wrapper,
  .guide-panel {
    background: hsl(var(--card) / 0.94);
    border: 1px solid hsl(var(--border) / 0.82);
    box-shadow: inset 0 1px 0 hsl(var(--background) / 0.8);
  }

  .metric-card h3,
  .access-stat h4,
  .token-stat .stat-title,
  .token-info-label,
  .quota-stat-label {
    color: hsl(var(--muted-foreground));
    letter-spacing: 0.04em;
  }

  .metric-value,
  .access-stat p,
  .token-stat .stat-value,
  .token-info-value,
  .quota-stat-value,
  .token-leaderboard-usage,
  .panel-header h2 {
    color: hsl(var(--foreground));
  }

  .token-input,
  .guide-panel code,
  .code-chip {
    border-color: hsl(var(--border) / 0.95);
    background: hsl(var(--background) / 0.84);
    color: hsl(var(--foreground));
  }

  .token-input {
    width: min(420px, 72vw);
  }

  .token-input:focus {
    border-color: hsl(var(--primary) / 0.6);
    box-shadow: 0 0 0 3px hsl(var(--primary) / 0.22);
  }

  .token-label {
    color: hsl(var(--foreground));
  }

  .guide-tab {
    border-color: hsl(var(--border));
    background: hsl(var(--background) / 0.8);
    color: hsl(var(--muted-foreground));
  }

  .guide-tab.active {
    background: linear-gradient(104deg, hsl(var(--primary)) 0%, hsl(var(--secondary)) 100%);
    color: hsl(var(--primary-foreground));
    border-color: transparent;
    box-shadow: 0 12px 24px -14px hsl(var(--primary) / 0.55);
  }

  .guide-tab:hover {
    border-color: hsl(var(--primary) / 0.4);
    color: hsl(var(--foreground));
  }

  .linuxdo-login-button {
    border: 1px solid hsl(var(--border));
    background: hsl(var(--card) / 0.95);
    color: hsl(var(--foreground));
    box-shadow: 0 10px 20px -18px hsl(var(--foreground) / 0.5);
  }

  .linuxdo-login-button:hover {
    border-color: hsl(var(--primary) / 0.5);
    box-shadow: 0 14px 26px -20px hsl(var(--primary) / 0.45);
  }

  .table-wrapper {
    border-radius: 14px;
  }

  thead {
    background: hsl(var(--muted) / 0.5);
  }

  th,
  td {
    border-bottom-color: hsl(var(--border) / 0.75);
  }

  th {
    color: hsl(var(--muted-foreground));
    font-weight: 600;
  }

  tbody tr:hover {
    background: hsl(var(--accent) / 0.1);
  }

  .segmented-tabs {
    border-color: hsl(var(--border) / 0.9);
    background: linear-gradient(180deg, hsl(var(--muted) / 0.72) 0%, hsl(var(--muted) / 0.56) 100%);
  }

  .segmented-tab {
    color: hsl(var(--muted-foreground));
  }

  .segmented-tab:hover:not(.is-active) {
    border-color: hsl(var(--primary) / 0.34);
    background: hsl(var(--accent) / 0.22);
    color: hsl(var(--foreground));
  }

  .segmented-tab.is-active {
    border-color: hsl(var(--primary) / 0.45);
    background: linear-gradient(135deg, hsl(var(--foreground) / 0.98) 0%, hsl(var(--primary) / 0.95) 100%);
    color: hsl(var(--primary-foreground));
    box-shadow: 0 8px 12px -10px hsl(var(--primary) / 0.56);
  }

  .token-group-chip {
    border-color: hsl(var(--border));
    background: hsl(var(--background) / 0.85);
    color: hsl(var(--muted-foreground));
  }

  .token-group-chip-active {
    background: linear-gradient(104deg, hsl(var(--primary)) 0%, hsl(var(--secondary)) 100%);
    color: hsl(var(--primary-foreground));
    box-shadow: 0 10px 22px -14px hsl(var(--primary) / 0.6);
  }

  .token-leaderboard-panel .chip {
    border-color: hsl(var(--border));
    background: hsl(var(--background) / 0.84);
    color: hsl(var(--foreground));
  }

  .token-leaderboard-panel .chip:hover {
    border-color: hsl(var(--primary) / 0.45);
    background: hsl(var(--accent) / 0.16);
  }

  .token-leaderboard-panel .chip-active {
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    border-color: transparent;
  }

  .token-leaderboard-panel .chip-ghost {
    background: hsl(var(--muted) / 0.62);
    color: hsl(var(--muted-foreground));
  }

  .error-banner {
    background: hsl(var(--destructive) / 0.14);
    border-color: hsl(var(--destructive) / 0.34);
    color: hsl(var(--destructive));
  }

  .token-quota-pill {
    background: hsl(var(--success) / 0.18);
    color: hsl(var(--success));
  }

  .token-quota-pill-hour {
    background: hsl(var(--warning) / 0.2);
    color: hsl(var(--warning));
  }

  .token-quota-pill-day {
    background: hsl(var(--destructive) / 0.2);
    color: hsl(var(--destructive));
  }

  .token-quota-pill-month {
    background: hsl(var(--secondary) / 0.2);
    color: hsl(var(--secondary));
  }

  .public-home-footer {
    border: 1px solid hsl(var(--border) / 0.72);
    background: hsl(var(--card) / 0.82);
  }

  .public-home-footer a {
    color: hsl(var(--primary));
  }

  .app-footer .footer-link:hover,
  .guide-reference a,
  .footer-version a {
    color: hsl(var(--primary));
  }

  .auth-shell {
    background:
      radial-gradient(680px 320px at 12% -8%, hsl(var(--primary) / 0.18), transparent 68%),
      radial-gradient(620px 280px at 100% 0%, hsl(var(--accent) / 0.16), transparent 72%),
      hsl(var(--background));
  }

  .auth-subtitle {
    color: hsl(var(--muted-foreground));
  }

  .auth-card {
    max-width: 38rem;
    margin-inline: auto;
  }

  .dark body {
    background:
      radial-gradient(980px 520px at 2% -14%, hsl(var(--primary) / 0.24), transparent 72%),
      radial-gradient(740px 420px at 98% -8%, hsl(var(--accent) / 0.2), transparent 74%),
      hsl(var(--background));
  }

  .dark .surface {
    background: linear-gradient(180deg, hsl(var(--card) / 0.9) 0%, hsl(var(--card) / 0.86) 100%);
    box-shadow:
      0 24px 44px -30px rgb(0 0 0 / 0.82),
      inset 0 1px 0 hsl(var(--foreground) / 0.06);
  }

  .dark .guide-tab {
    background: hsl(var(--muted) / 0.72);
    color: hsl(var(--muted-foreground));
  }

  .dark .guide-tab:hover {
    border-color: hsl(var(--accent) / 0.5);
    background: hsl(var(--accent) / 0.14);
  }

  .dark .language-switcher-trigger,
  .dark .theme-toggle-trigger {
    border-color: hsl(var(--border) / 0.88);
    background: hsl(var(--muted) / 0.58);
  }
}

@media (max-width: 768px) {
  .app-shell {
    padding: 18px 14px 30px;
  }

  .auth-card {
    max-width: 100%;
  }
}
